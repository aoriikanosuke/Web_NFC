<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>NFCスタンプラリー</title>
  <link rel="stylesheet" href="./css/stylesheet.css" />
</head>
<body>
  <div class="device">
    <div class="phone">
      <div class="app">
<!-- 背景（ガラス映え用） -->
      <div class="bg-orbs" aria-hidden="true">
        <span class="orb o1"></span>
        <span class="orb o2"></span>
        <span class="orb o3"></span>
      </div>
      <!-- Golden overlay for full-background sparkles -->
      <div id="goldenOverlay" class="golden-overlay" aria-hidden="true"></div>
      <!-- NFC hint (non-text) -->
      <div class="nfc-hint" aria-hidden="true">
        <span class="nfc-ring r1"></span>
        <span class="nfc-ring r2"></span>
        <span class="nfc-ring r3"></span>
        <span class="nfc-tag"></span>
      </div>
      <!-- Header -->
      <header class="header">
        <div class="title">
          <div class="title-glass glass">
            <img class="title-png" src="./images/NEW_title.png" alt="NFCスタンプラリー">
          </div>
          <!-- <div class="title-big">NFC</div>
          <div class="title-sub">スタンプラリー</div> -->
        </div>

        <!-- 全体はほどほど、OOPは通常ガラス -->
        <button id="oopInfo" class="oop-pill glass" type="button" aria-label="ポイントの説明を表示">
          <span id="oopValue" class="oop-value">0</span>
          <span class="oop-label">P</span>
        </button>
        <!-- SCAN をポイント下に表示 -->
        <div class="scan-top">
          <button id="scanBtn" class="scan-mini glass" type="button">SCAN</button>
        </div>
      </header>

      <!-- Pages (no reload) -->
      <main class="main">
        <!-- Stamp -->
        <section id="page-stamp" class="page is-active" aria-label="スタンプ">
          <div class="stamp-card glass">
            <div id="stampCarousel" class="stamp-carousel" aria-label="スタンプ押印エリア">
              <div class="stamp-track"></div>
            </div>

            <div id="indicator" class="indicator" aria-label="ページインジケータ"></div>

            <!-- Chips を枠内の右下に配置 -->
            <div class="below-row inside-card">
              <button id="chipsBtn" class="chips-btn glass" type="button">Chips</button>
            </div>
          </div>

          <button id="resetBtn" class="reset-hidden" type="button">RESET</button>
        </section>

        <!-- Pay -->
        <section id="page-pay" class="page" aria-label="決済">
          <div class="page-center glass">
            <h2 class="page-title">決済</h2>
            <p class="page-desc">ここに決済UI（100 / 200 など）を実装できます。</p>
          </div>

        </section>

        <!-- Profile -->
        <section id="page-profile" class="page" aria-label="プロフィール">
          <div class="page-center glass">
            <h2 class="page-title">プロフィール</h2>
            <div id="user-info" style="display: none;">
              <p>ようこそ、<span id="display-username"></span>さん</p>
              <button onclick="logout()">ログアウト</button>
            </div>
            <button id="auth-trigger-btn" onclick="openAuthModal()">ログイン/会員登録</button>
            <button class="danger" type="button" id="resetBtn2">進捗リセット</button>
          </div>

          <div id="auth-modal" class="modal" aria-hidden="true">
            <div class="modal-backdrop" onclick="closeAuthModal()"></div>
            <div class="modal-panel glass" role="dialog" aria-labelledby="auth-title">
              <div class="modal-head">
                <div id="auth-title" class="modal-title">ログイン</div>
                <button class="modal-close" type="button" onclick="closeAuthModal()">✕</button>
              </div>
              <div class="modal-body auth-form">
                <div class="auth-input-group">
                  <input type="text" id="auth-username" class="glass" placeholder="ユーザー名">
                  <input type="password" id="auth-password" class="glass" placeholder="パスワード">
                </div>
                <div class="auth-actions">
                  <button id="auth-submit-btn" class="chips-btn glass" onclick="handleAuth()">実行</button>
                </div>
                <p id="auth-toggle-text" class="auth-toggle-btn" onclick="toggleAuthMode()">新規登録はこちら</p>
              </div>
            </div>
          </div>

          <!-- Subtle Golden Card tucked bottom-right of profile page -->
          <div class="golden-card glass" aria-hidden="true">
            <div class="golden-head">
              <h4 style="margin:0; font-weight:800; font-size:15px;">ゴールデンモード</h4>
              <div id="goldenStatus" style="font-weight:700; font-size:13px;">未解禁</div>
            </div>
            <div class="golden-body">
              <div class="golden-actions">
                <button id="unlockGoldenBtn" class="chips-btn glass" type="button">50Pで解禁</button>
                <button id="toggleGoldenBtn" class="chips-btn glass" type="button" style="display:none;">ゴールデン:OFF</button>
              </div>
            </div>
            <div class="golden-sparks" aria-hidden="true">
            </div>
          </div>
        </section>
      </main>

      <!-- Stamp animation overlay -->
      <div id="stampAni" class="stamp-ani" aria-hidden="true">
        <div class="stamp-ani-sprite"></div>
      </div>

      <!-- Bottom Nav（ここを強めのガラスに） -->
      <nav class="bottom-nav glass-nav" aria-label="ボトムナビゲーション">
        <button class="nav-btn is-active" data-target="stamp" aria-label="スタンプ">
          <span class="nav-ico"><img class="nav-ico-img" src="./images/stamp.png" alt="スタンプ"></span>
        </button>
        <button class="nav-btn" data-target="pay" aria-label="決済">
          <span class="nav-ico"><img class="nav-ico-img" src="./images/pay.png" alt="決済"></span>
        </button>
        <button class="nav-btn" data-target="profile" aria-label="プロフィール">
          <span class="nav-ico"><img class="nav-ico-img" src="./images/profile.png" alt="プロフィール"></span>
        </button>
      </nav>

      <!-- Modal -->
      <div id="modal" class="modal" aria-hidden="true">
        <div class="modal-backdrop" data-close="1"></div>
        <div class="modal-panel glass" role="dialog" aria-modal="true" aria-label="location情報">
          <div class="modal-head">
            <div id="modalTitle" class="modal-title">location</div>
            <button class="modal-close" type="button" data-close="1">✕</button>
          </div>
          <div id="modalBody" class="modal-body"></div>
        </div>
      </div>
    </div>
    <!-- デバッグUI（デスクトップ時のみ表示） -->
    <div class="debug-tools" aria-hidden="true">
      <button id="debugToggle" class="glass debug-toggle-btn" type="button">デバッグモード</button>
      <div id="debugPanel" class="debug-panel glass" aria-hidden="true"></div>
    </div>
  </div>

  <!-- app -->
  <script src="./js/script.js" defer></script>
</body>
</html>
